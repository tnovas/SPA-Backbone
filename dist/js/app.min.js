/*! 
* Web - v1.0.0
* Copyright (c) 2014 Tomas Novas 
*  
*/ 

!function(a){"use strict";var b,c,d,e,f,g={".js":[],".json":[],".css":[],".html":[]},h="undefined"==typeof require?null:require;return e=function(a){var b=new Error("Could not find module '"+a+"'");return b.code="MODULE_NOT_FOUND",b},f=function(a,b,c){var d,e;if("function"==typeof a[b+c])return b+c;for(d=0;e=g[c][d];++d)if("function"==typeof a[b+e])return b+e;return null},b=function(a,d,g,h,i,j){var k,l,m,n,o,p;for(g=g.split(/[\\/]/),k=g.pop(),("."===k||".."===k)&&(g.push(k),k="");null!=(l=g.shift());)if(l&&"."!==l&&(".."===l?(a=d.pop(),j=j.slice(0,j.lastIndexOf("/"))):(d.push(a),a=a[l],j+="/"+l),!a))throw e(h);if(k&&"function"!=typeof a[k]&&(p=f(a,k,".js"),p||(p=f(a,k,".json")),p||(p=f(a,k,".css")),p||(p=f(a,k,".html")),p?k=p:2!==i&&"object"==typeof a[k]&&(d.push(a),a=a[k],j+="/"+k,k="")),!k)return 1!==i&&a[":mainpath:"]?b(a,d,a[":mainpath:"],h,1,j):b(a,d,"index",h,2,j);if(o=a[k],!o)throw e(h);return o.hasOwnProperty("module")?o.module.exports:(m={},o.module=n={exports:m,id:j+"/"+k},o.call(m,m,n,c(a,d,j)),n.exports)},d=function(c,d,f,g){var i,j=f,k=f.charAt(0),l=0;if("/"===k){if(j=j.slice(1),c=a["/"],!c){if(h)return h(f);throw e(f)}g="/",d=[]}else if("."!==k){if(i=j.split("/",1)[0],c=a[i],!c){if(h)return h(f);throw e(f)}g=i,d=[],j=j.slice(i.length+1),j||(j=c[":mainpath:"],j?l=1:(j="index",l=2))}return b(c,d,j,f,l,g)},(c=function(a,b,c){return function(e){return d(a,[].concat(b),e,c)}})(a,[],"")}({web:{app:{"Initializer.js":function(a,b,c){b.exports=function(){c("./app").start()}},"app.js":function(a,b,c){var d=c("./views/layout/LayoutView"),e=c("./routers/RouterApp"),f=b.exports=new Backbone.Marionette.Application;f.addInitializer(function(){f.addRegions({container:"body"}),f.setLang=c("./helpers/language/lang"),f.layout=new d({language:f.setLang}),f.container.show(f.layout),f.router=new e({app:f}),Backbone.history.start(),Backbone.history.on("all",function(){var a=$('ul[class="nav navbar-nav"] li'),b=Backbone.history.fragment,c=a.find('[href="#/'+b+'"]').parent(),d=a.not(c);c.addClass("active"),d.removeClass("active"),$(".panel-title").text(b.charAt(0).toUpperCase()+b.slice(1))})})},controllers:{home:{"home.js":function(a,b,c){var d=c("../../models/home/home");b.exports=function(a){Backbone.ajax({dataType:"json",url:"api/home",async:!0,success:function(b){a(new d(b))}})}}},login:{"login.js":function(a,b){b.exports=function(a,b){Backbone.ajax({dataType:"json",url:"api/login",data:a,async:!0,success:function(a){b(a)}})}}},products:{"products.js":function(a,b,c){var d=c("../../models/products/product");b.exports=function(a){Backbone.ajax({dataType:"json",url:"api/products",async:!0,success:function(b){a(new d(b))}})}}}},helpers:{language:{"lang.js":function(a,b){function c(a){window.abjson.load({source:a},function(){$("body").abjson()})}var d,e;b.exports=function(a){c("es"===a?d:e)},$.getJSON("locales/es/translation.json",function(a){d=a,c(d)}),$.getJSON("locales/en/translation.json",function(a){e=a})}}},"initDev.js":function(a,b,c){$(function(){c("./Initializer")({enviroment:"development"})})},models:{User:{"User.js":function(a,b){b.exports=Backbone.Model.extend({defaults:{id:"",mail:"",nombre:""}})}},home:{"home.js":function(a,b){b.exports=Backbone.Model.extend({defaults:{description:""}})}},products:{"product.js":function(a,b){var c=Backbone.Model.extend({defaults:{title:"",description:"",image:""}});b.exports=Backbone.Collection.extend({model:c})}}},routers:{"RouterApp.js":function(a,b){b.exports=Backbone.Router.extend({routes:{"":"home",inicio:"home",productos:"products",contacto:"contact",admin:"admin",login:"login"},initialize:function(a){this.app=a.app},home:function(){this.app.layout.showHome()},products:function(){this.app.layout.showProducts()},contact:function(){this.app.layout.showContact()},admin:function(){this.app.layout.showAdmin()},login:function(){this.app.layout.showLogin()}})}},views:{Contact:{"ContactView.js":function(a,b,c){var d=c("../templates/Contact/Contact");b.exports=Backbone.Marionette.ItemView.extend({template:d,title:"index.contact"})}},Login:{"LoginView.js":function(a,b,c){var d,e=c("../Templates/Login/Login"),f=c("../../models/User/User");b.exports=Backbone.Marionette.ItemView.extend({template:e,title:"index.admin",ui:{email:"input[type=text]",password:"input[type=password]"},events:{"click button":"login"},login:function(){d=this;var a={email:this.ui.email.val(),password:this.ui.password.val()};c("../../controllers/login/login")(a,this.setUser)},setUser:function(a){d.layout(new f(a))}})}},Templates:{Login:{"Login.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="container">\r\n    <div class="row">\r\n        <div class="col-sm-6 col-md-4 col-md-offset-4">\r\n            <div class="account-wall">\r\n                <img class="profile-img" src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=120"\r\n                    alt="">\r\n                <div class="form-signin">\r\n                    <input type="text" class="form-control" placeholder="Email" required autofocus>\r\n                    <input type="password" class="form-control" placeholder="Password" required>\r\n                    <button class="btn btn-lg btn-primary btn-block">Ingresar</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'})}}},home:{"HomeView.js":function(a,b,c){var d,e=c("../templates/home/home");b.exports=Backbone.Marionette.ItemView.extend({tagName:"p",template:e,title:"index.home",initialize:function(){d=this,c("../../controllers/home/home")(this.setHome)},setHome:function(a){d.model=a,d.render()}})}},layout:{"LayoutView.js":function(a,b,c){var d,e=c("../products/ProductsView"),f=c("../home/HomeView"),g=c("../Contact/ContactView"),h=c("../Login/LoginView");b.exports=Backbone.Marionette.LayoutView.extend({id:"main-layout",template:c("../templates/layout/mainLayout"),regions:{banner:"header[role=banner]",mainContent:".panel-body",footer:"footer[role=contentinfo]"},ui:{cultureDropBox:"ul[role=menu] li",title:"h3[class=panel-title]",searchDiv:"div[role=search]",searchButton:"div[role=search] button",searchText:"div[role=search] input"},events:{"click @ui.cultureDropBox":"changeCulture","click @ui.searchButton":"searchProducts","keyup @ui.searchText":"searchProducts"},initialize:function(a){d=this,this.setLang=a.language},searchProducts:function(){this.products.filterCollection(this.ui.searchText.val())},changeCulture:function(a){var b=$(a.target);this.ui.cultureDropBox.removeClass("active"),b.parent().addClass("active"),this.setLang(b.attr("culture"))},showHome:function(){this.showSearch();var a=new f;this.changeTitle(a.title),this.mainContent.show(a)},showProducts:function(){this.hideSearch(),this.products=new e,this.changeTitle(this.products.title),this.mainContent.show(this.products)},showContact:function(){this.showSearch();var a=new g;this.changeTitle(a.title),this.mainContent.show(a)},showAdmin:function(a){d.model=a},showLogin:function(){this.showSearch();var a=new h;a.layout=this.showAdmin,this.changeTitle(a.title),this.mainContent.show(a)},showSearch:function(){this.ui.searchDiv.addClass("sr-only")},hideSearch:function(){this.ui.searchDiv.removeClass("sr-only")},changeTitle:function(a){this.ui.title.attr("data-abjson",a)}})}},products:{"ProductsView.js":function(a,b,c){var d,e=c("../templates/products/Product"),f=c("../templates/products/Products"),g=Backbone.Marionette.ItemView.extend({template:e,className:"col-md-4"});b.exports=Backbone.Marionette.CompositeView.extend({template:f,childViewContainer:"div.row.productos",childView:g,title:"index.products",initialize:function(){d=this,c("../../controllers/products/products")(this.setCollection)},setCollection:function(a){d.collection=a,d.collectionFilter=a.clone(),d.render()},filterCollection:function(a){var b=a;if(""===b)this.collection=this.collectionFilter.clone();else{var c=this.collectionFilter.filter(function(a){return-1!==a.get("title").toLowerCase().indexOf(b.toLowerCase())});this.collection.reset(c)}this.render()}})}},templates:{Contact:{"Contact.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form role="form">\r\n  <div class="form-group">\r\n    <label for="name">Nombre</label>\r\n    <input class="form-control" id="name" placeholder="Ingrese su nombre">\r\n  </div>\r\n  <div class="form-group">\r\n    <label for="email">Email</label>\r\n    <input type="email" class="form-control" id="email" placeholder="Ingrese su email">\r\n  </div>\r\n  <div class="form-group">\r\n    <label for="consult">Consulta</label>\r\n    <textarea class="form-control" rows="3" id="consult" placeholder="Ingrese su consulta"></textarea>\r\n  </div>\r\n  <button type="submit" class="btn btn-default">Enviar</button>\r\n</form>'})}},home:{"home.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="function",h=this.escapeExpression;return(f=c.description)?f=f.call(b,{hash:{},data:e}):(f=b.description,f=typeof f===g?f.apply(b):f),h(f)})}},layout:{"mainLayout.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<header role="banner">\r\n	<nav class="navbar navbar-inverse" role="navigation">\r\n	    <div class="navbar-header">\r\n	      <button type="button" class="navbar-toggle">\r\n	        <span class="sr-only">Toggle navigation</span>\r\n	        <span class="icon-bar"></span>\r\n	        <span class="icon-bar"></span>\r\n	        <span class="icon-bar"></span>\r\n	      </button>\r\n	      <a class="navbar-brand" href="#">CityAgro</a>\r\n	    </div>\r\n	    <div class="collapse navbar-collapse">\r\n	      <ul class="nav navbar-nav">\r\n	      	<li class="active"><a href="#/inicio" data-abjson="index.home"></a></li>\r\n	      	<li><a href="#/productos" data-abjson="index.products"></a></li>\r\n	        <li><a href="#/contacto" data-abjson="index.contact"></a></li>\r\n	      </ul>\r\n	      <div class="navbar-form navbar-right sr-only" role="search">\r\n	        <div class="form-group">\r\n	          <input type="text" class="form-control" data-abjson="index.searchHolder" placeholder="">\r\n	        </div>\r\n	        <button type="button" class="btn btn-default" data-abjson="index.search"></button>\r\n	      </div>\r\n       		 <ul class="nav navbar-nav navbar-right">\r\n		        <li class="dropdown">\r\n		          <a class="dropdown-toggle" data-toggle="dropdown">Language<span class="caret"></span></a>\r\n		          <ul class="dropdown-menu" role="menu">\r\n		            <li class="active"><a culture="es"  data-abjson="index.spanish"></a></li>\r\n		            <li><a culture="en"  data-abjson="index.english"></a></li>\r\n		          </ul>\r\n		        </li>\r\n		      </ul>\r\n	    </div>\r\n	</nav>\r\n</header>\r\n<section role="main-content">\r\n	<div class="panel panel-default">\r\n	  <div class="panel-heading">\r\n	    <h3 class="panel-title"></h3>\r\n	  </div>\r\n	  <div class="panel-body"></div>\r\n	</div>	\r\n</section>\r\n<footer role="contentinfo">\r\n	<nav class="navbar navbar-inverse" role="navigation">\r\n	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n			<ul class="nav navbar-nav navbar-right">\r\n		      	<li><p class="navbar-text">Copyright 2014</p></li>\r\n	    	</ul>\r\n	    </div>\r\n	</nav>\r\n</footer>'})}},products:{"Product.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="thumbnail">   \r\n	<img src=',(f=c.image)?f=f.call(b,{hash:{},data:e}):(f=b.image,f=typeof f===h?f.apply(b):f),g+=i(f)+' alt="',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\r\n	<div class="caption">\r\n		<h3>',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),g+=i(f)+"</h3>\r\n		<p>",(f=c.description)?f=f.call(b,{hash:{},data:e}):(f=b.description,f=typeof f===h?f.apply(b):f),g+=i(f)+"</p>\r\n	</div>\r\n</div>"})},"Products.js":function(a,b){b.exports=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="row productos"></div>'})}}}}}}})("web/app/initDev");